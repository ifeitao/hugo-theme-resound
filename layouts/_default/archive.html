{{ define "main" }}
<div class="page">
  <h1 class="page-title">{{ .Title }}</h1>
  <article>
  <div class="tags-expo-section">
    <!-- output all year.month tags -->
    {{ range .Site.RegularPages.GroupByDate "2006.01" }}
    <a href="#{{ .Key }}" class="post-tag">#{{ .Key }}</a>
    {{ end }}
    <hr/>
    
    {{ range .Site.RegularPages.GroupByDate "2006.01" }}
    {{ $yearMonth := .Key }}
    {{ $firstPost := index .Pages 0 }}
    <div class="filter-section" id="{{ $yearMonth }}">
    <h3>{{ $firstPost.Date.Format "January" }}<span class="archive-year">{{ $firstPost.Date.Format "2006" }}</span></h3>
    <ul>
    {{ range .Pages }}
      <li><span class="post-date">{{ .Date.Format "2006.01.02" }}</span> - <a href="{{ .RelPermalink }}">{{ .Title }}</a></li>
    {{ end }}
    </ul>
    </div>
    {{ end }}
  </div>
  </article>
</div>

<script>
(function() {
  var a = document.querySelectorAll('.post-tag');
  for (var i = 0; i < a.length; i++) {
    a[i].onclick = function(e) {
      e = e || window.event;
      var target = e.target || e.srcElement;
      for (var j = 0; j < a.length; j++) {
        if (a[j] != target) {
          a[j].className = 'post-tag';
          document.getElementById(a[j].getAttribute('href').substr(1)).className = 'filter-section';
        } else {
          target.classList.toggle('select');
          document.getElementById(target.getAttribute('href').substr(1)).classList.toggle('result');
        }
      }
      e.preventDefault ? e.preventDefault() : (e.returnValue = false);
    } 
    if (window.location.hash.length) {
      try {
        document.querySelector('[href="' + decodeURI(window.location.hash) + '"]').className = 'post-tag select';
        document.getElementById(decodeURI(window.location.hash).substr(1)).className = 'filter-section result';
      } catch(err){}
    }
  }
})();
</script>
{{ end }}
